<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Local parallel processing · COBREXA.jl</title><meta name="title" content="Local parallel processing · COBREXA.jl"/><meta property="og:title" content="Local parallel processing · COBREXA.jl"/><meta property="twitter:title" content="Local parallel processing · COBREXA.jl"/><meta name="description" content="Documentation for COBREXA.jl."/><meta property="og:description" content="Documentation for COBREXA.jl."/><meta property="twitter:description" content="Documentation for COBREXA.jl."/><meta property="og:url" content="https://cobrexa.github.io/COBREXA.jl/stable/distributed/2_parallel/"/><meta property="twitter:url" content="https://cobrexa.github.io/COBREXA.jl/stable/distributed/2_parallel/"/><link rel="canonical" href="https://cobrexa.github.io/COBREXA.jl/stable/distributed/2_parallel/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="COBREXA.jl logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="COBREXA.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">COBREXA.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/">Contents</a></li><li><a class="tocitem" href="../../examples/01-loading-and-saving/">Loading and saving models</a></li><li><a class="tocitem" href="../../examples/02a-flux-balance-analysis/">Flux balance analysis (FBA)</a></li><li><a class="tocitem" href="../../examples/02b-optimizer-parameters/">Changing optimizer parameters</a></li><li><a class="tocitem" href="../../examples/02c-model-modifications/">Making adjustments to the model</a></li><li><a class="tocitem" href="../../examples/02d-constraint-modifications/">Making adjustments to the constraint system</a></li><li><a class="tocitem" href="../../examples/03a-flux-variability-analysis/">Flux variability analysis (FVA)</a></li><li><a class="tocitem" href="../../examples/03b-parsimonious-flux-balance/">Parsimonious flux balance analysis</a></li><li><a class="tocitem" href="../../examples/03c-envelopes/">Production envelopes</a></li><li><a class="tocitem" href="../../examples/03d-unidirectional/">Split unidirectional reactions in models</a></li><li><a class="tocitem" href="../../examples/04-community-models/">Community FBA models</a></li><li><a class="tocitem" href="../../examples/05a-minimization-of-metabolic-adjustment/">Minimization of metabolic adjustment analysis</a></li><li><a class="tocitem" href="../../examples/05b-enzyme-constrained-models/">Enzyme constrained models</a></li><li><a class="tocitem" href="../../examples/05c-mmdf/">Thermodynamic models</a></li><li><a class="tocitem" href="../../examples/05d-loopless-models/">Loopless flux balance analysis (ll-FBA)</a></li><li><a class="tocitem" href="../../examples/05e-knockouts/">Gene knockouts</a></li><li><a class="tocitem" href="../../examples/05f-cyclefree/">CycleFreeFlux</a></li><li><a class="tocitem" href="../../examples/05g-gapfilling/">Gap filling</a></li><li><a class="tocitem" href="../../examples/06a-sampling/">Flux sampling</a></li><li><a class="tocitem" href="../../examples/06b-screening/">Screening through many model variants</a></li></ul></li><li><a class="tocitem" href="../../structure/">Core concepts and structure</a></li><li><span class="tocitem">Parallel, distributed and HPC processing</span><ul><li><a class="tocitem" href="../">Contents</a></li><li><a class="tocitem" href="../1_functions/">Parallel processing overview</a></li><li class="is-active"><a class="tocitem" href>Local parallel processing</a></li><li><a class="tocitem" href="../3_slurm/">Working in a HPC environment</a></li></ul></li><li><span class="tocitem">API reference</span><ul><li><a class="tocitem" href="../../reference/">Contents</a></li><li><a class="tocitem" href="../../reference/analysis/">Specialized analysis functions</a></li><li><a class="tocitem" href="../../reference/builders/">Constraint system builders</a></li><li><a class="tocitem" href="../../reference/core/">Core functionality</a></li><li><a class="tocitem" href="../../reference/frontend/">Front-end user interface</a></li><li><a class="tocitem" href="../../reference/misc/">Miscellaneous functions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Parallel, distributed and HPC processing</a></li><li class="is-active"><a href>Local parallel processing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Local parallel processing</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/COBREXA/COBREXA.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/COBREXA/COBREXA.jl/blob/master/docs/src/distributed/2_parallel.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Local-parallel-processing"><a class="docs-heading-anchor" href="#Local-parallel-processing">Local parallel processing</a><a id="Local-parallel-processing-1"></a><a class="docs-heading-anchor-permalink" href="#Local-parallel-processing" title="Permalink"></a></h1><p>To run an analysis in parallel, we first need to load the <code>Distributed</code> package and add a few worker processes. For example, we may start 5 local processes (that may utilize 5 CPUs) as follows</p><pre><code class="language-julia hljs">using Distributed
addprocs(5)</code></pre><div class="admonition is-info"><header class="admonition-header">`Distributed.jl` installation</header><div class="admonition-body"><p><code>Distributed.jl</code> usually comes pre-installed with Julia distribution, but one may still need to &quot;enable&quot; it by typing <code>] add Distributed</code>.</p></div></div><p>To check that the workers are really there, use <code>workers()</code>. In this case, it should return a vector of <em>worker IDs</em>, very likely equal to <code>[2,3,4,5,6]</code>.</p><p>Each of the processes contains a self-sufficient image of Julia that can act independently; in turn the additional processes also consume some memory. Each process with loaded <code>COBREXA.jl</code> and a solver such as HiGHS may consume around 300MB of RAM, which should be taken into account when planning the analysis scale.</p><div class="admonition is-warning"><header class="admonition-header">Using Julia environments with Distributed</header><div class="admonition-body"><p>In certain conditions, the Distributed package does not properly forward the project configuration to the workers, resulting to package version mismatches and other problems. For pipelines that run in custom project folders, use the following form of <code>addprocs</code> instead:</p><pre><code class="language-julia hljs">addprocs(5, exeflags=`--project=$(Base.active_project())`)</code></pre></div></div><p>Packages (COBREXA and the selected solver) must be loaded at all processes, which may ensured using the &quot;everywhere&quot; macro (from <code>Distributed</code> package):</p><pre><code class="language-julia hljs">@everywhere using COBREXA, HiGHS</code></pre><p>Utilizing the prepared worker processes is then straightforward: We pass the list of workers to the selected analysis function using the <code>workers</code> keyword argument, and the parallel processing is orchestrated automatically:</p><pre><code class="language-julia hljs">model = load_model(&quot;e_coli_core.xml&quot;)
result = flux_variability_analysis(
    model,
    optimizer = HiGHS.Optimizer,
    workers = workers()
)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../1_functions/">« Parallel processing overview</a><a class="docs-footer-nextpage" href="../3_slurm/">Working in a HPC environment »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Friday 22 November 2024 09:46">Friday 22 November 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
